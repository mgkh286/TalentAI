const translations = {
  ar: {
    logo_sub: "منصة توظيفي الذكية بالذكاء الاصطناعي",
    nav_about: "عن المنصة",
    nav_features: "المزايا",
    nav_workflow: "كيف تعمل",
    nav_contact: "انضم الآن",
    hero_title: "منصة توظيف ذكية تدعم رؤية المملكة 2030",
    hero_subtitle:
      "TalentAI تربط بين الباحثين عن عمل والشركات باستخدام الذكاء الاصطناعي، من تحليل السيرة الذاتية إلى المقابلات الافتراضية، في منصة واحدة متكاملة.",
    hero_btn_primary: "جرّب النسخة التجريبية",
    hero_btn_secondary: "استكشف المزايا",
    hero_badge_1: "متوافقة مع رؤية 2030",
    hero_badge_2: "دعم سوق العمل السعودي",
    hero_card_title: "تحليل السيرة الذاتية",
    hero_card_body:
      "يقوم النظام بقراءة السيرة الذاتية، تقييم المهارات، وإعطاء درجة جاهزية وظيفية لكل متقدم.",
    hero_card_score_title: "درجة الجاهزية",
    hero_score_hint: "جاهزية عالية للتوظيف في وظائف إدارة المشاريع.",
    about_title: "نبذة عن المنصة",
    about_body_1:
      "منصة TalentAI / توظيفي الذكية هي منصة توظيف تعتمد على الذكاء الاصطناعي لتطوير تجربة التوظيف بالكامل، من لحظة إنشاء السيرة الذاتية، مرورًا بالمقابلات الافتراضية، وحتى اختيار المرشح الأنسب للشركة.",
    about_body_2:
      "المنصة تدعم الباحثين عن عمل من خلال تقييم جاهزيتهم الوظيفية وتقديم توصيات تدريبية، كما تدعم الشركات في الوصول السريع للمواهب المؤهلة، بما يتماشى مع مستهدفات رؤية المملكة 2030 في تمكين الكفاءات الوطنية.",
    about_highlights_title: "ماذا تقدم المنصة؟",
    about_highlights_1: "تحليل ذكي للسيرة الذاتية واستخراج المهارات الأساسية.",
    about_highlights_2:
      "مطابقة دقيقة بين المتقدمين والوظائف باستخدام الذكاء الاصطناعي.",
    about_highlights_3:
      "مقابلات افتراضية مع تقييم للغة الجسد ونبرة الصوت.",
    about_highlights_4:
      "ربط مع معاهد تدريب لتطوير المهارات المطلوبة في سوق العمل.",
    features_title: "المزايا الرئيسية",
    features_ats_title: "نظام ATS ذكي",
    features_ats_body:
      "نظام تتبّع وفرز للمتقدمين يقرأ السير الذاتية، يحولها إلى بيانات، ويقارنها بمتطلبات الوظيفة لترتيب أفضل المرشحين بشكل دقيق.",
    features_cv_title: "منشئ سيرة ذاتية احترافي",
    features_cv_body:
      "يساعد الباحث عن عمل على إنشاء سيرة ذاتية متوافقة مع نظام ATS وبصياغة احترافية باللغتين.",
    features_ai_interview_title: "مقابلات افتراضية بالذكاء الاصطناعي",
    features_ai_interview_body:
      "إجراء مقابلات مرئية وتحليل نبرة الصوت، الثقة، والمهارات السلوكية لإعطاء تقييم شامل للمرشح.",
    features_training_title: "تدريب وتطوير مهاري",
    features_training_body:
      "ربط مباشر مع معاهد تدريب، مع توصيات مخصّصة لكل مرشح بناءً على فجوة المهارات لديه.",
    workflow_title: "كيف تعمل المنصة؟",
    workflow_step1_title: "تسجيل وبناء الملف المهني",
    workflow_step1_body:
      "يقوم الباحث عن عمل بإنشاء حساب وإدخال بياناته الأساسية ورفع السيرة الذاتية لتحليلها.",
    workflow_step2_title: "تحليل السيرة وتقييم الجاهزية",
    workflow_step2_body:
      "يتم تحليل السيرة الذاتية وتوليد درجة جاهزية وظيفية Talent Score مع توصيات تطوير.",
    workflow_step3_title: "المطابقة الذكية مع الوظائف",
    workflow_step3_body:
      "تعرض المنصة وظائف متناسبة مع مهارات المرشح، وتسهّل على الشركة اختيار أفضل المرشحين.",
    workflow_step4_title: "مقابلات وتوظيف",
    workflow_step4_body:
      "يمكن إجراء المقابلات عبر المنصة، ثم المضي قدمًا في التوظيف أو تقديم خطة تطوير إضافية.",
    contact_title: "انضم كشركة أو باحث عن عمل",
    contact_body:
      "هذه الصفحة نموذج أولي لفكرة المنصة في هاكاثون طويق. يمكن تطويرها لتصبح منصة كاملة للتوظيف الذكي بالذكاء الاصطناعي، تدعم الشركات والباحثين عن عمل والمعاهد التدريبية.",
    contact_item_1:
      "تجربة مجانية للشركات والباحثين عن عمل في المرحلة التجريبية.",
    contact_item_2:
      "إمكانية ربط المنصة مع أنظمة الشركات والمعاهد التدريبية.",
    contact_form_title: "نموذج اهتمام",
    contact_form_name: "الاسم / Name",
    contact_form_email: "البريد الإلكتروني / Email",
    contact_form_role: "أنا",
    contact_form_role_option1: "باحث عن عمل",
    contact_form_role_option2: "شركة / جهة توظيف",
    contact_form_role_option3: "معهد تدريب / شريك",
    contact_form_btn: "إرسال (نموذج تجريبي)",
    contact_form_note:
      "هذا النموذج تجريبي لعرض الفكرة في الهاكاثون، ويمكن ربطه لاحقًا بقاعدة بيانات وواجهة برمجية.",
    footer_text: "منصة توظيفي الذكية – نموذج أولي لمشروع هاكاثون طويق",
  },
  en: {
    logo_sub: "Intelligent recruitment platform powered by AI",
    nav_about: "About",
    nav_features: "Features",
    nav_workflow: "How it works",
    nav_contact: "Get started",
    hero_title: "AI-powered recruitment platform for Vision 2030",
    hero_subtitle:
      "TalentAI connects job seekers and companies using artificial intelligence, from CV analysis to AI interviews, in one integrated platform.",
    hero_btn_primary: "Try Beta Version",
    hero_btn_secondary: "Explore Features",
    hero_badge_1: "Aligned with Vision 2030",
    hero_badge_2: "Supports Saudi labor market",
    hero_card_title: "CV Analysis",
    hero_card_body:
      "The system reads the CV, evaluates skills, and generates a talent readiness score for each candidate.",
    hero_card_score_title: "Talent Score",
    hero_score_hint: "High readiness for project management roles.",
    about_title: "About the Platform",
    about_body_1:
      "TalentAI is an AI-powered recruitment platform that transforms the hiring journey from CV creation to AI interviews and candidate selection.",
    about_body_2:
      "It supports job seekers by assessing their readiness and recommending tailored training, and helps companies access qualified talents faster, aligned with Vision 2030.",
    about_highlights_title: "What does TalentAI offer?",
    about_highlights_1: "Smart CV analysis and skill extraction.",
    about_highlights_2:
      "Accurate AI matching between candidates and job opportunities.",
    about_highlights_3:
      "Virtual interviews with body language and voice analysis.",
    about_highlights_4:
      "Direct integration with training institutes to close skill gaps.",
    features_title: "Key Features",
    features_ats_title: "Intelligent ATS System",
    features_ats_body:
      "Reads and parses CVs, converts them into structured data, and matches them with job requirements to rank the best candidates.",
    features_cv_title: "Professional CV Builder",
    features_cv_body:
      "Helps job seekers build ATS-friendly CVs in both Arabic and English with professional wording.",
    features_ai_interview_title: "AI Virtual Interviews",
    features_ai_interview_body:
      "Conducts video interviews and analyzes tone of voice, confidence, and behavioral skills.",
    features_training_title: "Training & Skill Development",
    features_training_body:
      "Connects candidates with training programs and institutes based on their personalized skill gaps.",
    workflow_title: "How TalentAI Works",
    workflow_step1_title: "Create Profile & Upload CV",
    workflow_step1_body:
      "The candidate creates an account, fills in basic data, and uploads their CV for analysis.",
    workflow_step2_title: "Analyze CV & Talent Score",
    workflow_step2_body:
      "The system analyzes the CV and generates a Talent Score with improvement recommendations.",
    workflow_step3_title: "Smart Job Matching",
    workflow_step3_body:
      "The platform shows opportunities that match the candidate’s skills and helps companies shortlist quickly.",
    workflow_step4_title: "Interview & Hire",
    workflow_step4_body:
      "Interviews can be conducted on the platform, followed by hiring decisions or further development plans.",
    contact_title: "Join as Company or Job Seeker",
    contact_body:
      "This page is a prototype of the platform idea for Tuwaiq Hackathon. It can be expanded into a full AI recruitment system.",
    contact_item_1:
      "Free trial for companies and job seekers during the beta phase.",
    contact_item_2:
      "Can be integrated with company systems and training providers.",
    contact_form_title: "Interest Form",
    contact_form_name: "Name / الاسم",
    contact_form_email: "Email / البريد الإلكتروني",
    contact_form_role: "I am",
    contact_form_role_option1: "Job Seeker",
    contact_form_role_option2: "Company / Employer",
    contact_form_role_option3: "Training Institute / Partner",
    contact_form_btn: "Submit (Demo Form)",
    contact_form_note:
      "This is a demo form for the hackathon prototype and can later be connected to backend APIs and databases.",
    footer_text:
      "TalentAI – Smart recruitment platform prototype for Tuwaiq Hackathon",
  },
};

let currentLang = "ar";

const langToggle = document.getElementById("langToggle");
const yearSpan = document.getElementById("year");
yearSpan.textContent = new Date().getFullYear();

function applyTranslations(lang) {
  const elements = document.querySelectorAll("[data-i18n]");
  elements.forEach((el) => {
    const key = el.getAttribute("data-i18n");
    if (translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });

  // ضبط اتجاه الصفحة
  const html = document.documentElement;
  if (lang === "ar") {
    html.lang = "ar";
    html.dir = "rtl";
    langToggle.textContent = "English";
  } else {
    html.lang = "en";
    html.dir = "ltr";
    langToggle.textContent = "العربية";
  }
}

langToggle.addEventListener("click", () => {
  currentLang = currentLang === "ar" ? "en" : "ar";
  applyTranslations(currentLang);
});

// تطبيق العربية مبدئيًا
applyTranslations(currentLang);

/* Scroll reveal animation */

const animatedEls = document.querySelectorAll("[data-animate]");

const observer = new IntersectionObserver(
  (entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("is-visible");
        observer.unobserve(entry.target);
      }
    });
  },
  {
    threshold: 0.2,
  }
);

animatedEls.forEach((el) => observer.observe(el));

/* WhatsApp integration for form */

const contactForm = document.getElementById("contactForm");
if (contactForm) {
  contactForm.addEventListener("submit", (e) => {
    e.preventDefault();

    const name = document.getElementById("fullName")?.value.trim() || "";
    const email = document.getElementById("email")?.value.trim() || "";
    const role = document.getElementById("role")?.value || "";

    const phone = "966541331320";
    let message = "";

    if (currentLang === "ar") {
      message =
        `مرحباً، أرغب في معرفة المزيد عن منصة TalentAI (منصة توظيفي الذكية).\n` +
        `الاسم: ${name}\n` +
        `البريد الإلكتروني: ${email}\n` +
        `أنا: ${role}`;
    } else {
      message =
        `Hello, I am interested in the TalentAI (Tawdifi AI) platform.\n` +
        `Name: ${name}\n` +
        `Email: ${email}\n` +
        `I am: ${role}`;
    }

    const waUrl = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
    window.open(waUrl, "_blank");
  });
}

/* Back to top button */

const backToTopBtn = document.getElementById("backToTop");

if (backToTopBtn) {
  window.addEventListener("scroll", () => {
    if (window.scrollY > 300) {
      backToTopBtn.classList.add("show");
    } else {
      backToTopBtn.classList.remove("show");
    }
  });

  backToTopBtn.addEventListener("click", () => {
    window.scrollTo({
      top: 0,
      behavior: "smooth",
    });
  });
}
